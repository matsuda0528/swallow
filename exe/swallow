#! /usr/bin/env ruby

$LOAD_PATH.unshift File.expand_path("../lib", __dir__)
require "swallow"
require "pry"
require "rufo"

module Swallow
  # AUK Parser
  parser = AUKParser.new
  parser.parse File.read(ARGV[0]) if ARGV[0]
  ast = parser.ast

  # SAT Encoder
  ast.to_cnf

  # AUK Generator
  auk = parser.ast.to_auk
  formatter = Rufo::Formatter.new(auk)
  formatter.format
  puts formatter.result
end
